/*! solo-project 2016-05-16 */
var app=angular.module("app",[]);app.controller("MainController",["$scope","$http",function(a,b){a.homeHide=!0,a.studentHide=!1,a.programHide=!1,a.salesHide=!1,a.showHome=function(){a.homeHide=!a.homeHide,a.studentHide===!0&&(a.studentHide=!a.studentHide),a.programHide===!0&&(a.programHide=!a.programHide),a.salesHide===!0&&(a.salesHide=!a.salesHide)},a.showStudents=function(){a.studentHide=!a.studentHide,a.homeHide===!0&&(a.homeHide=!a.homeHide),a.programHide===!0&&(a.programHide=!a.programHide),a.salesHide===!0&&(a.salesHide=!a.salesHide)},a.showPrograms=function(){a.programHide=!a.programHide,a.homeHide===!0&&(a.homeHide=!a.homeHide),a.studentHide===!0&&(a.studentHide=!a.studentHide),a.salesHide===!0&&(a.salesHide=!a.salesHide)},a.showSales=function(){a.salesHide=!a.salesHide,a.homeHide===!0&&(a.homeHide=!a.homeHide),a.studentHide===!0&&(a.studentHide=!a.studentHide),a.programHide===!0&&(a.programHide=!a.programHide)},a.studentArray=[],a.studentObject={},a.edit=!1,a.toggle=!0,a.count=0,a.getStudents=function(){b.get("/student").then(function(b){a.studentObject={},a.studentArray=b.data})},a.getStudents(),a.add=function(c){b.post("/add",c).then(a.getStudents())},a.change=function(c){a.count++,a.count%2===0&&b.put("/change/"+c._id,c)},a.deleteStudent=function(c){var d=confirm("Are you sure you want to delete this student? This cannot be reversed.");d&&b["delete"]("/deleteStudent/"+c._id).then(function(b){a.getStudents(),console.log("Deleted")})},a.currentRank="",a.rank="",a.goal="",a.totalMonths="",a.firstProgramForm=!0,a.secondProgramForm=!1,a.firstNext=function(){a.firstProgramForm=!a.firstProgramForm,a.secondProgramForm=!a.secondProgramForm},a.tuition="",a.familyDiscount="",a.earlyEnroll="",a.thirdProgramForm=!1,a.secondNext=function(){a.tuition=Number(a.tuition),a.familyDiscount=Number(a.familyDiscount),a.earlyEnroll=Number(a.earlyEnroll),a.totalTuition=Number(a.totalTuition),a.totalTuition=Math.round(100*(a.tuition-a.tuition*a.familyDiscount-a.earlyEnroll))/100,a.secondProgramForm=!a.secondProgramForm,a.thirdProgramForm=!a.thirdProgramForm},a.uniform="",a.equipment="",a.promotion="",a.fourthProgramForm=!1,a.thirdNext=function(){a.uniform=Number(a.uniform),a.equipment=Number(a.equipment),a.promotion=Number(a.promotion),a.totalPackage=Math.round(100*(a.uniform+a.equipment+a.promotion))/100,a.thirdProgramForm=!a.thirdProgramForm,a.fourthProgramForm=!a.fourthProgramForm},a.currentRemainingTuition="",a.remainingMonths="",a.fifthProgramForm=!1,a.fourthNext=function(){a.currentRemainingTuition=Number(a.currentRemainingTuition),a.totalWithInclusions=Number(a.totalWithInclusions),a.totalWithInclusions=Math.round(100*(a.totalTuition+a.currentRemainingTuition+a.uniform+a.equipment+a.promotion))/100,a.fourthProgramForm=!a.fourthProgramForm,a.fifthProgramForm=!a.fifthProgramForm},a.initialPayment="",a.fourPayDiscount=.02,a.showInvestments=!1,a.showInvestmentOptions=function(){a.initialPayment=Number(a.initialPayment),a.fourPayDiscount=Number(a.fourPayDiscount),a.newTuition=Number(a.newTuition),a.balance=Math.round(100*(a.totalWithInclusions-a.initialPayment))/100,a.monthlyAmount=Math.round(a.balance/a.totalMonths*100)/100,a.newTuition=Math.round(100*(a.totalTuition-a.totalTuition*a.fourPayDiscount))/100,a.fourMonthly=Math.round((a.newTuition+a.totalPackage+a.currentRemainingTuition)/4*100)/100,a.fourSavings=Math.round(100*(a.totalTuition-a.newTuition))/100,a.onePayTotal=Math.round(100*(a.totalTuition-.1*a.totalTuition+a.totalPackage+a.currentRemainingTuition))/100,a.oneSavings=Math.round(.1*a.totalTuition*100)/100,a.onePayWithDiscount=Math.round(100*(a.totalTuition-.1*a.totalTuition))/100,a.fifthProgramForm=!a.fifthProgramForm,a.showInvestments=!a.showInvestments},a.homeTotal=function(c){b.get("/getSales",c).then(function(b){a.saleObject={},a.saleArray=b.data,a.sum=function(a,b){return a.reduce(function(a,c){return a+c[b]},0)},a.moneyForMonth=a.sum(a.saleArray,"totalPrice")})},a.homeTotal(),a.saleArray=[],a.saleObject={},a.addSale=function(c){a.sale.quanity=Number(a.sale.quanity),a.sale.price=Number(a.sale.price),a.sale.totalPrice=a.sale.quanity*a.sale.price,b.post("/sale",c).then(a.homeTotal())}}]);